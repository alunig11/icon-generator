<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Icon Generator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&display=swap" rel="stylesheet">
  <style>
    #preview {
      font-family: 'Poppins', sans-serif;
      font-weight: 600;
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col items-center justify-center font-sans px-6">

  <!-- Header -->
  <h1 class="text-3xl font-bold text-gray-900 mb-8 tracking-tight">
    Icon Generator
  </h1>

  <!-- Inputs inline -->
  <div class="flex w-full max-w-md gap-3 mb-6 items-center">
    <input 
      type="text" 
      id="text" 
      placeholder="Enter text here"
      class="flex-grow px-5 py-3 rounded-full border border-gray-300 text-gray-800 
             focus:ring-4 focus:ring-indigo-400 focus:border-indigo-500 outline-none
             text-lg shadow-sm bg-white"
    >

    <!-- Circle color picker -->
    <div class="relative">
      <input 
        type="color" 
        id="color" 
        value="#007bff"
        class="absolute inset-0 w-full h-full opacity-0 cursor-pointer rounded-full"
      >
      <div id="colorCircle" 
           class="w-14 h-14 rounded-full shadow-sm border border-gray-300">
      </div>
    </div>
  </div>

  <!-- Preview -->
  <div id="preview" 
       class="flex items-center justify-center 
              w-28 h-28 text-white rounded-2xl shadow-md mb-6 transition-colors duration-300 text-[2.5rem]">
    Re
  </div>

  <!-- Action button -->
  <button id="download"
          class="w-full max-w-md py-3 rounded-full text-lg font-semibold 
                 bg-indigo-600 text-white shadow-sm
                 hover:bg-indigo-700 active:scale-95 transition">
    Download
  </button>

<script>
function updatePreview() {
  const preview = document.getElementById("preview");
  const fullText = document.getElementById("text").value.trim();
  const displayText = fullText.substring(0, 2) || "Re";
  const colorValue = document.getElementById("color").value;

  preview.textContent = displayText; 
  preview.style.backgroundColor = colorValue;

  // Sync visible circle with color
  document.getElementById("colorCircle").style.backgroundColor = colorValue;
}

document.getElementById("text").addEventListener("input", updatePreview);
document.getElementById("color").addEventListener("input", updatePreview);

document.getElementById("download").addEventListener("click", () => {
  const canvas = document.createElement("canvas");
  canvas.width = 128;
  canvas.height = 128;
  const ctx = canvas.getContext("2d");

  const fullText = document.getElementById("text").value.trim() || "icon";
  const displayText = fullText.substring(0, 2);

  // Background
  ctx.fillStyle = document.getElementById("color").value;
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  // Text
  ctx.fillStyle = "white";
  let fontSize = canvas.width * 0.5;
  ctx.font = `600 ${fontSize}px 'Poppins', sans-serif`;
  let metrics = ctx.measureText(displayText);

  while (metrics.width > canvas.width * 0.8) {
    fontSize -= 2;
    ctx.font = `600 ${fontSize}px 'Poppins', sans-serif`;
    metrics = ctx.measureText(displayText);
  }

  ctx.textAlign = "center";
  ctx.textBaseline = "alphabetic";
  const ascent = metrics.actualBoundingBoxAscent || fontSize * 0.8;
  const y = (canvas.height + ascent) / 2;

  ctx.fillText(displayText, canvas.width / 2, y);

  // Download
  const link = document.createElement("a");
  link.download = fullText + ".png"; 
  link.href = canvas.toDataURL("image/png");
  link.click();
});

updatePreview();
</script>
</body>
</html>
